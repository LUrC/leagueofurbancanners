<h2>Sign up</h2>

<%= form_for(setup_user(resource), :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-horizontal'}) do |f| %>
  <%= devise_error_messages! %>

  <div class="control-group">
    <%= f.label :email, :class => 'control-label' %>
    <div class="controls"><%= f.email_field :email %></div>
  </div>

  <div class="control-group">
    <%= f.label :password, :class => 'control-label'  %>
    <div class="controls"><%= f.password_field :password %></div>
  </div>

  <div class="control-group">
    <%= f.label :password_confirmation, :class => 'control-label'  %>
    <div class="controls"><%= f.password_field :password_confirmation %></div>
  </div>

  <% if current_user && current_user.admin? %>
    <div class="control-group">
      <%= f.label :role, :class => 'control-label' %>
      <div class="controls"><%= f.collection_select :role, User::ROLES, :to_s, :humanize %></div>
    </div>
  <% end %>

  <%= f.fields_for :person do |ff| %>
    <div class="control-group">
      <%= ff.label :first_name, :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :first_name %></div>
    </div>
    <div class="control-group">
      <%= ff.label :last_name, :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :last_name %></div>
    </div>
    <div class="control-group">
      <%= ff.label 'phone (optional)', :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :phone %></div>
    </div>
    <div class="control-group">
      <%= ff.label 'street_number (optional)', :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :street_number %></div>
    </div>
    <div class="control-group">
      <%= ff.label 'street_name (optional)', :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :street_name %></div>
    </div>
    <div class="control-group">
      <%= ff.label 'city (optional)', :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :city %></div>
    </div>
    <div class="control-group">
      <%= ff.label 'zipcode (optional)', :class => 'control-label' %>
      <div class="controls"><%= ff.text_field :zipcode %></div>
    </div>

    <div class="control-group">
      <div class='control-label'>Interests</div>
      <%= ff.fields_for :person_interests do |fff| %>
        <div class="controls">
          <%= fff.check_box :_destroy,
                {:checked => fff.object.persisted?},
                '0', '1'
          %>
          <%= fff.label :_destroy, fff.object.interest.name, :style => "display:inline-block;" %>
          <%= fff.hidden_field :interest_id %>
        </div>
      <% end %>
    </div>

  <% end %>

  <div class="controls"><%= f.submit "Sign up", :class => 'btn btn-primary' %></div>

<% end %>

  <%= render "devise/shared/links" %>


